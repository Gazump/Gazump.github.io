var me=Object.defineProperty;var ke=(s,e,t)=>e in s?me(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var W=(s,e,t)=>(ke(s,typeof e!="symbol"?e+"":e,t),t);import{s as ge,n as J,o as be,r as pe,e as we}from"../chunks/scheduler.BvLojk_z.js";import{S as _e,i as ve,y as z,z as Y,d as G,g as v,o as u,j as M,k as m,A as H,e as C,s as D,b as U,u as Ce,c as E,B as A,h as S,f as j,v as Ee,w as Pe,l as X,t as qe,a as ye,x as Ie,C as F,p as Q}from"../chunks/index.BVbBP3S1.js";function O(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}class Ge{constructor(e=5){W(this,"code",[]);W(this,"codeLength");this.codeLength=e,this.generateCode()}generateCode(){this.code=Array.from({length:this.codeLength},()=>Math.floor(Math.random()*10))}getCode(){return this.code}checkGuess(e){if(e.length!==this.codeLength)throw new Error("Guess length does not match code length");return e.map((t,o)=>{const n=Math.abs(t-this.code[o]);return n===0?"green":n===1?"yellow":n===2?"orange":n===3?"red":"gray"})}}function Z(s,e,t){const o=s.slice();return o[2]=e[t],o[4]=t,o}function x(s){let e,t,o,n;return{c(){e=z("g"),t=z("rect"),this.h()},l(l){e=Y(l,"g",{transform:!0});var r=G(e);t=Y(r,"rect",{y:!0,width:!0,height:!0,fill:!0,class:!0}),G(t).forEach(v),r.forEach(v),this.h()},h(){u(t,"y",o=100-s[2]),u(t,"width","20"),u(t,"height","50"),u(t,"fill",n=s[1][s[4]]),u(t,"class","svelte-1aegubf"),u(e,"transform","translate("+(56+s[4]*25)+", 60)")},m(l,r){M(l,e,r),m(e,t)},p(l,r){r&1&&o!==(o=100-l[2])&&u(t,"y",o),r&2&&n!==(n=l[1][l[4]])&&u(t,"fill",n)},d(l){l&&v(e)}}}function Le(s){let e,t,o=O(s[0]),n=[];for(let l=0;l<o.length;l+=1)n[l]=x(Z(s,o,l));return{c(){e=z("svg"),t=z("rect");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=Y(l,"svg",{viewBox:!0,width:!0,height:!0});var r=G(e);t=Y(r,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),G(t).forEach(v);for(let i=0;i<n.length;i+=1)n[i].l(r);r.forEach(v),this.h()},h(){u(t,"x","50"),u(t,"y","50"),u(t,"width","132"),u(t,"height","158"),u(t,"fill","#ccc"),u(t,"stroke","#000"),u(t,"stroke-width","2"),u(t,"class","svelte-1aegubf"),u(e,"viewBox","0 0 232 300"),u(e,"width","264"),u(e,"height","300")},m(l,r){M(l,e,r),m(e,t);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(l,[r]){if(r&3){o=O(l[0]);let i;for(i=0;i<o.length;i+=1){const f=Z(l,o,i);n[i]?n[i].p(f,r):(n[i]=x(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=o.length}},i:J,o:J,d(l){l&&v(e),H(n,l)}}}function Be(s,e,t){let{pinPositions:o=[0,0,0,0,0]}=e,{correctPositions:n=["","","","",""]}=e;return s.$$set=l=>{"pinPositions"in l&&t(0,o=l.pinPositions),"correctPositions"in l&&t(1,n=l.correctPositions)},[o,n]}class Te extends _e{constructor(e){super(),ve(this,e,Be,Le,ge,{pinPositions:0,correctPositions:1})}}function $(s,e,t){const o=s.slice();return o[21]=e[t],o}function ee(s,e,t){const o=s.slice();return o[21]=e[t],o[24]=e,o[25]=t,o}function te(s,e,t){const o=s.slice();return o[25]=e[t],o}function le(s,e,t){const o=s.slice();return o[28]=e[t],o}function ne(s,e,t){const o=s.slice();return o[31]=e[t],o[25]=t,o}function se(s){let e,t=s[28].guess[s[25]]+"",o;return{c(){e=C("div"),o=U(t),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0});var l=G(e);o=j(l,t),l.forEach(v),this.h()},h(){u(e,"class","feedback-cell svelte-150qp5p"),Q(e,"background-color",s[31])},m(n,l){M(n,e,l),m(e,o)},p(n,l){l[0]&2&&t!==(t=n[28].guess[n[25]]+"")&&X(o,t),l[0]&2&&Q(e,"background-color",n[31])},d(n){n&&v(e)}}}function oe(s){let e,t,o=O(s[28].colors),n=[];for(let l=0;l<o.length;l+=1)n[l]=se(ne(s,o,l));return{c(){e=C("div");for(let l=0;l<n.length;l+=1)n[l].c();t=D(),this.h()},l(l){e=E(l,"DIV",{class:!0});var r=G(e);for(let i=0;i<n.length;i+=1)n[i].l(r);t=S(r),r.forEach(v),this.h()},h(){u(e,"class","feedback-row svelte-150qp5p")},m(l,r){M(l,e,r);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);m(e,t)},p(l,r){if(r[0]&2){o=O(l[28].colors);let i;for(i=0;i<o.length;i+=1){const f=ne(l,o,i);n[i]?n[i].p(f,r):(n[i]=se(f),n[i].c(),n[i].m(e,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=o.length}},d(l){l&&v(e),H(n,l)}}}function re(s){let e,t,o="You picked the lock!",n,l,r="Share",i,f;return{c(){e=C("div"),t=C("p"),t.textContent=o,n=D(),l=C("button"),l.textContent=r,this.h()},l(k){e=E(k,"DIV",{class:!0});var g=G(e);t=E(g,"P",{"data-svelte-h":!0}),A(t)!=="svelte-18bb638"&&(t.textContent=o),n=S(g),l=E(g,"BUTTON",{class:!0,"data-svelte-h":!0}),A(l)!=="svelte-12lghq3"&&(l.textContent=r),g.forEach(v),this.h()},h(){u(l,"class","share-button svelte-150qp5p"),u(e,"class","win-message svelte-150qp5p")},m(k,g){M(k,e,g),m(e,t),m(e,n),m(e,l),i||(f=F(l,"click",s[12]),i=!0)},p:J,d(k){k&&v(e),i=!1,f()}}}function ie(s){let e,t,o="You fail...",n,l,r="Share",i,f,k,g,p,_=O(s[0]),d=[];for(let h=0;h<_.length;h+=1)d[h]=ce(te(s,_,h));return{c(){e=C("div"),t=C("p"),t.textContent=o,n=D(),l=C("button"),l.textContent=r,i=D(),f=C("div"),k=C("div");for(let h=0;h<d.length;h+=1)d[h].c();this.h()},l(h){e=E(h,"DIV",{class:!0});var w=G(e);t=E(w,"P",{"data-svelte-h":!0}),A(t)!=="svelte-1crkit9"&&(t.textContent=o),n=S(w),l=E(w,"BUTTON",{class:!0,"data-svelte-h":!0}),A(l)!=="svelte-12lghq3"&&(l.textContent=r),w.forEach(v),i=S(h),f=E(h,"DIV",{class:!0});var b=G(f);k=E(b,"DIV",{class:!0});var V=G(k);for(let N=0;N<d.length;N+=1)d[N].l(V);V.forEach(v),b.forEach(v),this.h()},h(){u(l,"class","share-button svelte-150qp5p"),u(e,"class","win-message svelte-150qp5p"),u(k,"class","feedback-row svelte-150qp5p"),u(f,"class","answer-container svelte-150qp5p")},m(h,w){M(h,e,w),m(e,t),m(e,n),m(e,l),M(h,i,w),M(h,f,w),m(f,k);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(k,null);g||(p=F(l,"click",s[12]),g=!0)},p(h,w){if(w[0]&1){_=O(h[0]);let b;for(b=0;b<_.length;b+=1){const V=te(h,_,b);d[b]?d[b].p(V,w):(d[b]=ce(V),d[b].c(),d[b].m(k,null))}for(;b<d.length;b+=1)d[b].d(1);d.length=_.length}},d(h){h&&(v(e),v(i),v(f)),H(d,h),g=!1,p()}}}function ce(s){let e,t=s[25]+"",o;return{c(){e=C("div"),o=U(t),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0});var l=G(e);o=j(l,t),l.forEach(v),this.h()},h(){u(e,"class","feedback-cell svelte-150qp5p"),Q(e,"background-color","Green")},m(n,l){M(n,e,l),m(e,o)},p(n,l){l[0]&1&&t!==(t=n[25]+"")&&X(o,t)},d(n){n&&v(e)}}}function ae(s){let e,t=O(s[0]),o=[];for(let n=0;n<t.length;n+=1)o[n]=he(ee(s,t,n));return{c(){e=C("div");for(let n=0;n<o.length;n+=1)o[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var l=G(e);for(let r=0;r<o.length;r+=1)o[r].l(l);l.forEach(v),this.h()},h(){u(e,"class","guess-container svelte-150qp5p")},m(n,l){M(n,e,l);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(e,null)},p(n,l){if(l[0]&773){t=O(n[0]);let r;for(r=0;r<t.length;r+=1){const i=ee(n,t,r);o[r]?o[r].p(i,l):(o[r]=he(i),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=t.length}},d(n){n&&v(e),H(o,n)}}}function he(s){let e,t,o=s[25],n,l;const r=()=>s[15](e,o),i=()=>s[15](null,o);function f(...g){return s[16](s[25],...g)}function k(...g){return s[17](s[25],...g)}return{c(){e=C("input"),this.h()},l(g){e=E(g,"INPUT",{type:!0,maxlength:!0,class:!0}),this.h()},h(){u(e,"type","text"),u(e,"maxlength","1"),e.value=t=s[21]!==-1?s[21]:"",e.readOnly=!0,u(e,"class","svelte-150qp5p")},m(g,p){M(g,e,p),r(),n||(l=[F(e,"input",f),F(e,"keydown",k)],n=!0)},p(g,p){s=g,p[0]&1&&t!==(t=s[21]!==-1?s[21]:"")&&e.value!==t&&(e.value=t),o!==s[25]&&(i(),o=s[25],r())},d(g){g&&v(e),i(),n=!1,pe(l)}}}function fe(s){let e,t,o="Enter",n,l,r,i='<svg fill="#000000" height="35px" width="26px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><g><g><g><path d="M490.667,64H133.077c-7.196,0-13.906,3.627-17.848,9.647L3.485,244.314c-4.647,7.098-4.647,16.274,0,23.372 l111.744,170.667c3.942,6.02,10.652,9.647,17.848,9.647h357.589c11.782,0,21.333-9.551,21.333-21.333V85.333 C512,73.551,502.449,64,490.667,64z M469.333,405.333H144.609L46.833,256l97.776-149.333h324.725V405.333z"></path><path d="M198.246,356.418c8.331,8.331,21.839,8.331,30.17,0l70.248-70.248l70.248,70.248c8.331,8.331,21.839,8.331,30.17,0 s8.331-21.839,0-30.17L328.834,256l70.248-70.248c8.331-8.331,8.331-21.839,0-30.17s-21.839-8.331-30.17,0l-70.248,70.248 l-70.248-70.248c-8.331-8.331-21.839-8.331-30.17,0c-8.331,8.331-8.331,21.839,0,30.17L268.495,256l-70.248,70.248 C189.915,334.58,189.915,348.087,198.246,356.418z"></path></g></g></g></g></svg>',f,k,g=O(Array.from({length:10}).map(de)),p=[];for(let _=0;_<g.length;_+=1)p[_]=ue($(s,g,_));return{c(){e=C("footer"),t=C("button"),t.textContent=o,n=D();for(let _=0;_<p.length;_+=1)p[_].c();l=D(),r=C("button"),r.innerHTML=i,this.h()},l(_){e=E(_,"FOOTER",{class:!0});var d=G(e);t=E(d,"BUTTON",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-jiris3"&&(t.textContent=o),n=S(d);for(let h=0;h<p.length;h+=1)p[h].l(d);l=S(d),r=E(d,"BUTTON",{class:!0,"data-svelte-h":!0}),A(r)!=="svelte-1pvk8ya"&&(r.innerHTML=i),d.forEach(v),this.h()},h(){u(t,"class","svelte-150qp5p"),u(r,"class","svelte-150qp5p"),u(e,"class","buttons svelte-150qp5p")},m(_,d){M(_,e,d),m(e,t),m(e,n);for(let h=0;h<p.length;h+=1)p[h]&&p[h].m(e,null);m(e,l),m(e,r),f||(k=[F(t,"click",s[10]),F(r,"click",s[11])],f=!0)},p(_,d){if(d[0]&5){g=O(Array.from({length:10}).map(de));let h;for(h=0;h<g.length;h+=1){const w=$(_,g,h);p[h]?p[h].p(w,d):(p[h]=ue(w),p[h].c(),p[h].m(e,l))}for(;h<p.length;h+=1)p[h].d(1);p.length=g.length}},d(_){_&&v(e),H(p,_),f=!1,pe(k)}}}function ue(s){let e,t=s[21]+"",o,n,l;function r(){return s[18](s[21])}return{c(){e=C("button"),o=U(t),this.h()},l(i){e=E(i,"BUTTON",{class:!0});var f=G(e);o=j(f,t),f.forEach(v),this.h()},h(){u(e,"class","svelte-150qp5p")},m(i,f){M(i,e,f),m(e,o),n||(l=F(e,"click",r),n=!0)},p(i,f){s=i},d(i){i&&v(e),n=!1,l()}}}function Ve(s){let e,t,o="Lockle",n,l,r,i,f,k,g,p,_,d,h,w,b,V,N=O(s[1]),q=[];for(let c=0;c<N.length;c+=1)q[c]=oe(le(s,N,c));let y=s[3]&&re(s),L=s[4]&&ie(s),B=!s[3]&&!s[4]&&ae(s);w=new Te({props:{pinPositions:s[6],correctPositions:s[7]}});let T=!s[3]&&!s[4]&&fe(s);return{c(){e=C("main"),t=C("h1"),t.textContent=o,n=D(),l=C("h3"),r=U("Guesses left: "),i=U(s[5]),f=D(),k=C("div");for(let c=0;c<q.length;c+=1)q[c].c();g=D(),y&&y.c(),p=D(),L&&L.c(),_=D(),B&&B.c(),d=D(),h=C("div"),Ce(w.$$.fragment),b=D(),T&&T.c(),this.h()},l(c){e=E(c,"MAIN",{});var a=G(e);t=E(a,"H1",{"data-svelte-h":!0}),A(t)!=="svelte-1uda5oc"&&(t.textContent=o),n=S(a),l=E(a,"H3",{});var I=G(l);r=j(I,"Guesses left: "),i=j(I,s[5]),I.forEach(v),f=S(a),k=E(a,"DIV",{class:!0});var P=G(k);for(let K=0;K<q.length;K+=1)q[K].l(P);P.forEach(v),g=S(a),y&&y.l(a),p=S(a),L&&L.l(a),_=S(a),B&&B.l(a),d=S(a),h=E(a,"DIV",{class:!0});var R=G(h);Ee(w.$$.fragment,R),R.forEach(v),b=S(a),T&&T.l(a),a.forEach(v),this.h()},h(){u(k,"class","feedback-container svelte-150qp5p"),u(h,"class","feedback-lock-container svelte-150qp5p")},m(c,a){M(c,e,a),m(e,t),m(e,n),m(e,l),m(l,r),m(l,i),m(e,f),m(e,k);for(let I=0;I<q.length;I+=1)q[I]&&q[I].m(k,null);m(e,g),y&&y.m(e,null),m(e,p),L&&L.m(e,null),m(e,_),B&&B.m(e,null),m(e,d),m(e,h),Pe(w,h,null),m(e,b),T&&T.m(e,null),V=!0},p(c,a){if((!V||a[0]&32)&&X(i,c[5]),a[0]&2){N=O(c[1]);let P;for(P=0;P<N.length;P+=1){const R=le(c,N,P);q[P]?q[P].p(R,a):(q[P]=oe(R),q[P].c(),q[P].m(k,null))}for(;P<q.length;P+=1)q[P].d(1);q.length=N.length}c[3]?y?y.p(c,a):(y=re(c),y.c(),y.m(e,p)):y&&(y.d(1),y=null),c[4]?L?L.p(c,a):(L=ie(c),L.c(),L.m(e,_)):L&&(L.d(1),L=null),!c[3]&&!c[4]?B?B.p(c,a):(B=ae(c),B.c(),B.m(e,d)):B&&(B.d(1),B=null);const I={};a[0]&64&&(I.pinPositions=c[6]),a[0]&128&&(I.correctPositions=c[7]),w.$set(I),!c[3]&&!c[4]?T?T.p(c,a):(T=fe(c),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i(c){V||(qe(w.$$.fragment,c),V=!0)},o(c){ye(w.$$.fragment,c),V=!1},d(c){c&&v(e),H(q,c),y&&y.d(),L&&L.d(),B&&B.d(),Ie(w),T&&T.d()}}}function Me(){return/Mobi|Android/i.test(navigator.userAgent)}function De(s){return{Green:"🟩",Yellow:"🟨",Orange:"🟧",Red:"🟥",Gray:"⬛"}[s]||"⬛"}function Se(s){return s.map(e=>e.colors.map(De).join("")).join(`
`)}const de=(s,e)=>e;function Ne(s,e,t){const n="always";let l,r=[-1,-1,-1,-1,-1],i=[],f=[],k=!1,g=!1,p=6,_=[0,0,0,0,0],d=["","","","",""];be(()=>{l=new Ge,f[0].focus()});function h(c,a){const I=c.target,P=parseInt(I.value);!isNaN(P)&&P>=0&&P<=9?(t(0,r[a]=P,r),a<3&&f[a+1].focus()):I.value=""}function w(c,a){c.key==="Enter"?b():c.key==="Backspace"&&(a>0?f[a-1].focus():(t(0,r[a]=-1,r),t(2,f[a].value="",f),f[a].focus()))}function b(){if(r.every(c=>c!==-1)){t(5,p--,p);const c=l.checkGuess(r);if(t(1,i=[...i,{guess:[...r],colors:c}]),V(c),c.every(a=>a==="green"))t(3,k=!0);else if(t(0,r=[-1,-1,-1,-1,-1]),f[0].focus(),p===0){t(4,g=!0),t(0,r=l.getCode());const a=l.checkGuess(r);V(a)}}}function V(c){t(6,_=r.map((a,I)=>(10-a)*10)),t(7,d=c.map(a=>a))}function N(){const c=r.length-1-r.slice().reverse().findIndex(a=>a!==-1);c>=0&&c<r.length&&(t(0,r[c]=-1,r),t(2,f[c].value="",f),f[c].focus())}function q(){const a=`Lockle #1:
${Se(i)}

Play here: https://gazump.github.io`;Me()&&navigator.share?navigator.share({title:"Lockle Guess",text:a}):navigator.clipboard.writeText(a).then(()=>{alert("Copied to clipboard!")})}function y(c,a){we[c?"unshift":"push"](()=>{f[a]=c,t(2,f)})}return[r,i,f,k,g,p,_,d,h,w,b,N,q,!0,n,y,(c,a)=>h(a,c),(c,a)=>w(a,c),c=>{const a=r.findIndex(I=>I===-1);a!==-1&&(t(0,r[a]=c,r),t(2,f[a].value=c.toString(),f),a<3&&f[a+1].focus())}]}class He extends _e{constructor(e){super(),ve(this,e,Ne,Ve,ge,{prerender:13,trailingSlash:14},null,[-1,-1])}get prerender(){return this.$$.ctx[13]}get trailingSlash(){return this.$$.ctx[14]}}export{He as component};
