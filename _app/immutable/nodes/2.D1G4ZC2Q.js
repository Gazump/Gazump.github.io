var re=Object.defineProperty;var ce=(i,e,l)=>e in i?re(i,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[e]=l;var A=(i,e,l)=>(ce(i,typeof e!="symbol"?e+"":e,l),l);import{s as te,n as O,o as ae,r as le,e as he}from"../chunks/scheduler.BvLojk_z.js";import{S as ne,i as se,y as N,z as D,d as L,g as m,o as f,j as G,k as P,A as H,e as E,s as M,u as ue,c as I,B as z,h as B,v as fe,w as ge,t as de,a as _e,x as pe,C as S,b as oe,f as ie,p as R,l as me}from"../chunks/index.BVbBP3S1.js";function V(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}class ve{constructor(e=5){A(this,"code",[]);A(this,"codeLength");this.codeLength=e,this.generateCode()}generateCode(){this.code=[1,2,3,4,5]}getCode(){return this.code}checkGuess(e){if(e.length!==this.codeLength)throw new Error("Guess length does not match code length");return e.map((l,s)=>{const t=Math.abs(l-this.code[s]);return t===0?"green":t===1?"yellow":t===2?"orange":t===3?"red":"gray"})}}function j(i,e,l){const s=i.slice();return s[2]=e[l],s[4]=l,s}function U(i){let e,l,s,t;return{c(){e=N("g"),l=N("rect"),this.h()},l(n){e=D(n,"g",{transform:!0});var o=L(e);l=D(o,"rect",{y:!0,width:!0,height:!0,fill:!0,class:!0}),L(l).forEach(m),o.forEach(m),this.h()},h(){f(l,"y",s=100-i[2]),f(l,"width","20"),f(l,"height","50"),f(l,"fill",t=i[1][i[4]]),f(l,"class","svelte-1aegubf"),f(e,"transform","translate("+(56+i[4]*25)+", 60)")},m(n,o){G(n,e,o),P(e,l)},p(n,o){o&1&&s!==(s=100-n[2])&&f(l,"y",s),o&2&&t!==(t=n[1][n[4]])&&f(l,"fill",t)},d(n){n&&m(e)}}}function ke(i){let e,l,s=V(i[0]),t=[];for(let n=0;n<s.length;n+=1)t[n]=U(j(i,s,n));return{c(){e=N("svg"),l=N("rect");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=D(n,"svg",{viewBox:!0,width:!0,height:!0});var o=L(e);l=D(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),L(l).forEach(m);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){f(l,"x","50"),f(l,"y","50"),f(l,"width","132"),f(l,"height","158"),f(l,"fill","#ccc"),f(l,"stroke","#000"),f(l,"stroke-width","2"),f(l,"class","svelte-1aegubf"),f(e,"viewBox","0 0 232 300"),f(e,"width","264"),f(e,"height","300")},m(n,o){G(n,e,o),P(e,l);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(n,[o]){if(o&3){s=V(n[0]);let r;for(r=0;r<s.length;r+=1){const _=j(n,s,r);t[r]?t[r].p(_,o):(t[r]=U(_),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},i:O,o:O,d(n){n&&m(e),H(t,n)}}}function be(i,e,l){let{pinPositions:s=[0,0,0,0,0]}=e,{correctPositions:t=["","","","",""]}=e;return i.$$set=n=>{"pinPositions"in n&&l(0,s=n.pinPositions),"correctPositions"in n&&l(1,t=n.correctPositions)},[s,t]}class we extends ne{constructor(e){super(),se(this,e,be,ke,te,{pinPositions:0,correctPositions:1})}}function q(i,e,l){const s=i.slice();return s[16]=e[l],s}function F(i,e,l){const s=i.slice();return s[16]=e[l],s[19]=e,s[20]=l,s}function K(i,e,l){const s=i.slice();return s[21]=e[l],s}function W(i,e,l){const s=i.slice();return s[24]=e[l],s[20]=l,s}function Y(i){let e,l=i[21].guess[i[20]]+"",s;return{c(){e=E("div"),s=oe(l),this.h()},l(t){e=I(t,"DIV",{class:!0,style:!0});var n=L(e);s=ie(n,l),n.forEach(m),this.h()},h(){f(e,"class","feedback-cell svelte-19ta4u6"),R(e,"background-color",i[24])},m(t,n){G(t,e,n),P(e,s)},p(t,n){n&2&&l!==(l=t[21].guess[t[20]]+"")&&me(s,l),n&2&&R(e,"background-color",t[24])},d(t){t&&m(e)}}}function J(i){let e,l,s=V(i[21].colors),t=[];for(let n=0;n<s.length;n+=1)t[n]=Y(W(i,s,n));return{c(){e=E("div");for(let n=0;n<t.length;n+=1)t[n].c();l=M(),this.h()},l(n){e=I(n,"DIV",{class:!0});var o=L(e);for(let r=0;r<t.length;r+=1)t[r].l(o);l=B(o),o.forEach(m),this.h()},h(){f(e,"class","feedback-row svelte-19ta4u6")},m(n,o){G(n,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);P(e,l)},p(n,o){if(o&2){s=V(n[21].colors);let r;for(r=0;r<s.length;r+=1){const _=W(n,s,r);t[r]?t[r].p(_,o):(t[r]=Y(_),t[r].c(),t[r].m(e,l))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(n){n&&m(e),H(t,n)}}}function Q(i){let e,l='<p>You picked the lock!</p> <button class="share-button svelte-19ta4u6">Share</button>';return{c(){e=E("div"),e.innerHTML=l,this.h()},l(s){e=I(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-146nxz"&&(e.innerHTML=l),this.h()},h(){f(e,"class","win-message svelte-19ta4u6")},m(s,t){G(s,e,t)},d(s){s&&m(e)}}}function X(i){let e,l=V(i[0]),s=[];for(let t=0;t<l.length;t+=1)s[t]=Z(F(i,l,t));return{c(){e=E("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=I(t,"DIV",{class:!0});var n=L(e);for(let o=0;o<s.length;o+=1)s[o].l(n);n.forEach(m),this.h()},h(){f(e,"class","guess-container svelte-19ta4u6")},m(t,n){G(t,e,n);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(t,n){if(n&197){l=V(t[0]);let o;for(o=0;o<l.length;o+=1){const r=F(t,l,o);s[o]?s[o].p(r,n):(s[o]=Z(r),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(t){t&&m(e),H(s,t)}}}function Z(i){let e,l,s=i[20],t,n;const o=()=>i[10](e,s),r=()=>i[10](null,s);function _(...g){return i[11](i[20],...g)}function y(...g){return i[12](i[20],...g)}return{c(){e=E("input"),this.h()},l(g){e=I(g,"INPUT",{type:!0,maxlength:!0,class:!0}),this.h()},h(){f(e,"type","text"),f(e,"maxlength","1"),e.value=l=i[16]!==-1?i[16]:"",f(e,"class","svelte-19ta4u6")},m(g,d){G(g,e,d),o(),t||(n=[S(e,"input",_),S(e,"keydown",y)],t=!0)},p(g,d){i=g,d&1&&l!==(l=i[16]!==-1?i[16]:"")&&e.value!==l&&(e.value=l),s!==i[20]&&(r(),s=i[20],o())},d(g){g&&m(e),r(),t=!1,le(n)}}}function x(i){let e,l,s="Enter",t,n,o,r='<svg fill="#000000" height="35px" width="26px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><g><g><g><path d="M490.667,64H133.077c-7.196,0-13.906,3.627-17.848,9.647L3.485,244.314c-4.647,7.098-4.647,16.274,0,23.372 l111.744,170.667c3.942,6.02,10.652,9.647,17.848,9.647h357.589c11.782,0,21.333-9.551,21.333-21.333V85.333 C512,73.551,502.449,64,490.667,64z M469.333,405.333H144.609L46.833,256l97.776-149.333h324.725V405.333z"></path><path d="M198.246,356.418c8.331,8.331,21.839,8.331,30.17,0l70.248-70.248l70.248,70.248c8.331,8.331,21.839,8.331,30.17,0 s8.331-21.839,0-30.17L328.834,256l70.248-70.248c8.331-8.331,8.331-21.839,0-30.17s-21.839-8.331-30.17,0l-70.248,70.248 l-70.248-70.248c-8.331-8.331-21.839-8.331-30.17,0c-8.331,8.331-8.331,21.839,0,30.17L268.495,256l-70.248,70.248 C189.915,334.58,189.915,348.087,198.246,356.418z"></path></g></g></g></g></svg>',_,y,g=V(Array.from({length:10}).map(ee)),d=[];for(let p=0;p<g.length;p+=1)d[p]=$(q(i,g,p));return{c(){e=E("footer"),l=E("button"),l.textContent=s,t=M();for(let p=0;p<d.length;p+=1)d[p].c();n=M(),o=E("button"),o.innerHTML=r,this.h()},l(p){e=I(p,"FOOTER",{class:!0});var k=L(e);l=I(k,"BUTTON",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-jiris3"&&(l.textContent=s),t=B(k);for(let a=0;a<d.length;a+=1)d[a].l(k);n=B(k),o=I(k,"BUTTON",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-1pvk8ya"&&(o.innerHTML=r),k.forEach(m),this.h()},h(){f(l,"class","svelte-19ta4u6"),f(o,"class","svelte-19ta4u6"),f(e,"class","buttons svelte-19ta4u6")},m(p,k){G(p,e,k),P(e,l),P(e,t);for(let a=0;a<d.length;a+=1)d[a]&&d[a].m(e,null);P(e,n),P(e,o),_||(y=[S(l,"click",i[8]),S(o,"click",i[9])],_=!0)},p(p,k){if(k&5){g=V(Array.from({length:10}).map(ee));let a;for(a=0;a<g.length;a+=1){const b=q(p,g,a);d[a]?d[a].p(b,k):(d[a]=$(b),d[a].c(),d[a].m(e,n))}for(;a<d.length;a+=1)d[a].d(1);d.length=g.length}},d(p){p&&m(e),H(d,p),_=!1,le(y)}}}function $(i){let e,l=i[16]+"",s,t,n;function o(){return i[13](i[16])}return{c(){e=E("button"),s=oe(l),this.h()},l(r){e=I(r,"BUTTON",{class:!0});var _=L(e);s=ie(_,l),_.forEach(m),this.h()},h(){f(e,"class","svelte-19ta4u6")},m(r,_){G(r,e,_),P(e,s),t||(n=S(e,"click",o),t=!0)},p(r,_){i=r},d(r){r&&m(e),t=!1,n()}}}function Ce(i){let e,l,s="Safecracker Game",t,n,o,r,_,y,g,d,p,k=V(i[1]),a=[];for(let u=0;u<k.length;u+=1)a[u]=J(K(i,k,u));let b=i[3]&&Q(),w=!i[3]&&X(i);g=new we({props:{pinPositions:i[4],correctPositions:i[5]}});let C=!i[3]&&x(i);return{c(){e=E("main"),l=E("h1"),l.textContent=s,t=M(),n=E("div");for(let u=0;u<a.length;u+=1)a[u].c();o=M(),b&&b.c(),r=M(),w&&w.c(),_=M(),y=E("div"),ue(g.$$.fragment),d=M(),C&&C.c(),this.h()},l(u){e=I(u,"MAIN",{});var c=L(e);l=I(c,"H1",{"data-svelte-h":!0}),z(l)!=="svelte-1acj94"&&(l.textContent=s),t=B(c),n=I(c,"DIV",{class:!0});var h=L(n);for(let T=0;T<a.length;T+=1)a[T].l(h);h.forEach(m),o=B(c),b&&b.l(c),r=B(c),w&&w.l(c),_=B(c),y=I(c,"DIV",{class:!0});var v=L(y);fe(g.$$.fragment,v),v.forEach(m),d=B(c),C&&C.l(c),c.forEach(m),this.h()},h(){f(n,"class","feedback-container svelte-19ta4u6"),f(y,"class","feedback-lock-container svelte-19ta4u6")},m(u,c){G(u,e,c),P(e,l),P(e,t),P(e,n);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(n,null);P(e,o),b&&b.m(e,null),P(e,r),w&&w.m(e,null),P(e,_),P(e,y),ge(g,y,null),P(e,d),C&&C.m(e,null),p=!0},p(u,[c]){if(c&2){k=V(u[1]);let v;for(v=0;v<k.length;v+=1){const T=K(u,k,v);a[v]?a[v].p(T,c):(a[v]=J(T),a[v].c(),a[v].m(n,null))}for(;v<a.length;v+=1)a[v].d(1);a.length=k.length}u[3]?b||(b=Q(),b.c(),b.m(e,r)):b&&(b.d(1),b=null),u[3]?w&&(w.d(1),w=null):w?w.p(u,c):(w=X(u),w.c(),w.m(e,_));const h={};c&16&&(h.pinPositions=u[4]),c&32&&(h.correctPositions=u[5]),g.$set(h),u[3]?C&&(C.d(1),C=null):C?C.p(u,c):(C=x(u),C.c(),C.m(e,null))},i(u){p||(de(g.$$.fragment,u),p=!0)},o(u){_e(g.$$.fragment,u),p=!1},d(u){u&&m(e),H(a,u),b&&b.d(),w&&w.d(),pe(g),C&&C.d()}}}const ee=(i,e)=>e;function Pe(i,e,l){let s,t=[-1,-1,-1,-1,-1],n=[],o=[],r=!1,_=[0,0,0,0,0],y=["","","","",""];ae(()=>{s=new ve,o[0].focus()});function g(c,h){const v=c.target,T=parseInt(v.value);!isNaN(T)&&T>=0&&T<=9?(l(0,t[h]=T,t),h<3&&o[h+1].focus()):v.value=""}function d(c,h){c.key==="Enter"?p():c.key==="Backspace"&&(h>0?o[h-1].focus():(l(0,t[h]=-1,t),l(2,o[h].value="",o),o[h].focus()))}function p(){if(t.every(c=>c!==-1)){const c=s.checkGuess(t);l(1,n=[...n,{guess:[...t],colors:c}]),k(c),c.every(h=>h==="green")?l(3,r=!0):(l(0,t=[-1,-1,-1,-1,-1]),o[0].focus())}}function k(c){l(4,_=t.map((h,v)=>(10-h)*10)),l(5,y=c.map(h=>h))}function a(){const c=t.length-1-t.slice().reverse().findIndex(h=>h!==-1);c>=0&&c<t.length&&(l(0,t[c]=-1,t),l(2,o[c].value="",o),o[c].focus())}function b(c,h){he[c?"unshift":"push"](()=>{o[h]=c,l(2,o)})}return[t,n,o,r,_,y,g,d,p,a,b,(c,h)=>g(h,c),(c,h)=>d(h,c),c=>{const h=t.findIndex(v=>v===-1);h!==-1&&(l(0,t[h]=c,t),l(2,o[h].value=c.toString(),o),h<3&&o[h+1].focus())}]}class Le extends ne{constructor(e){super(),se(this,e,Pe,Ce,te,{})}}export{Le as component};
